var ct=Object.defineProperty;var at=(r,e,t)=>e in r?ct(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var _e=(r,e,t)=>(at(r,typeof e!="symbol"?e+"":e,t),t);import{S as De,i as Ce,s as He,k as m,a as P,l as b,m as v,c as D,h as d,n as N,p as I,b as B,G as c,H as ee,J as it,q as S,r as O,K as q,u as be,e as qe,L as pe,g as ne,v as ut,f as dt,d as me,M as Ie,N as ft,y as et,z as tt,A as lt,B as ot,O as st,P as ht,Q as ze,R as _t}from"../chunks/index.8d0acb4b.js";import{w as pt}from"../chunks/index.e85ee7f0.js";function We(r){let e,t=r[3]?"✅":"⏹️",l,o,s;return{c(){e=m("div"),l=S(t),this.h()},l(n){e=b(n,"DIV",{style:!0});var u=v(e);l=O(u,t),u.forEach(d),this.h()},h(){I(e,"grow","0"),I(e,"cursor","pointer")},m(n,u){B(n,e,u),c(e,l),o||(s=q(e,"click",r[5]),o=!0)},p(n,u){u&8&&t!==(t=n[3]?"✅":"⏹️")&&be(l,t)},d(n){n&&d(e),o=!1,s()}}}function mt(r){let e,t;return{c(){e=m("span"),t=S(r[0])},l(l){e=b(l,"SPAN",{});var o=v(e);t=O(o,r[0]),o.forEach(d)},m(l,o){B(l,e,o),c(e,t)},p(l,o){o&1&&be(t,l[0])},d(l){l&&d(e)}}}function bt(r){let e,t,l;return{c(){e=m("input"),this.h()},l(o){e=b(o,"INPUT",{type:!0,placeholder:!0,style:!0}),this.h()},h(){N(e,"type","text"),N(e,"placeholder","Add to todo list"),I(e,"background-color","white")},m(o,s){B(o,e,s),pe(e,r[0]),t||(l=q(e,"input",r[6]),t=!0)},p(o,s){s&1&&e.value!==o[0]&&pe(e,o[0])},d(o){o&&d(e),t=!1,l()}}}function Ge(r){let e;function t(s,n){return s[2]==="edit"?vt:gt}let l=t(r),o=l(r);return{c(){o.c(),e=qe()},l(s){o.l(s),e=qe()},m(s,n){o.m(s,n),B(s,e,n)},p(s,n){l===(l=t(s))&&o?o.p(s,n):(o.d(1),o=l(s),o&&(o.c(),o.m(e.parentNode,e)))},d(s){o.d(s),s&&d(e)}}}function gt(r){let e,t,l,o;return{c(){e=m("button"),t=S("✏️"),this.h()},l(s){e=b(s,"BUTTON",{style:!0});var n=v(e);t=O(n,"✏️"),n.forEach(d),this.h()},h(){I(e,"grow","0")},m(s,n){B(s,e,n),c(e,t),l||(o=q(e,"click",r[8]),l=!0)},p:ee,d(s){s&&d(e),l=!1,o()}}}function vt(r){let e,t,l,o;return{c(){e=m("button"),t=S("✏️"),this.h()},l(s){e=b(s,"BUTTON",{style:!0});var n=v(e);t=O(n,"✏️"),n.forEach(d),this.h()},h(){I(e,"grow","0"),I(e,"background-color","yellow")},m(s,n){B(s,e,n),c(e,t),l||(o=q(e,"click",r[7]),l=!0)},p:ee,d(s){s&&d(e),l=!1,o()}}}function Ke(r){let e,t,l,o;return{c(){e=m("button"),t=S("❌"),this.h()},l(s){e=b(s,"BUTTON",{style:!0});var n=v(e);t=O(n,"❌"),n.forEach(d),this.h()},h(){I(e,"grow","0")},m(s,n){B(s,e,n),c(e,t),l||(o=q(e,"click",r[9]),l=!0)},p:ee,d(s){s&&d(e),l=!1,o()}}}function yt(r){let e,t,l,o,s,n,u,f=r[1].todo.action.toggle&&We(r);function h(a,y){return a[2]==="edit"?bt:mt}let E=h(r),w=E(r),i=r[1].todo.action.edit&&Ge(r),_=r[1].todo.action.delete&&Ke(r);return{c(){e=m("li"),t=m("div"),f&&f.c(),l=P(),w.c(),o=P(),s=m("div"),i&&i.c(),n=P(),_&&_.c(),this.h()},l(a){e=b(a,"LI",{class:!0,style:!0});var y=v(e);t=b(y,"DIV",{class:!0,style:!0});var M=v(t);f&&f.l(M),l=D(M),w.l(M),M.forEach(d),o=D(y),s=b(y,"DIV",{class:!0,style:!0});var C=v(s);i&&i.l(C),n=D(C),_&&_.l(C),C.forEach(d),y.forEach(d),this.h()},h(){N(t,"class","flex"),I(t,"gap",".25rem"),N(s,"class","flex"),I(s,"gap",".25rem"),N(e,"class","inline-flex justify-between items-center w-full"),N(e,"style",u=`background-color: ${r[3]?"lightgreen":"lightskyblue"}; padding: .25rem .5rem; margin-bottom: .5rem; gap: 1rem;`)},m(a,y){B(a,e,y),c(e,t),f&&f.m(t,null),c(t,l),w.m(t,null),c(e,o),c(e,s),i&&i.m(s,null),c(s,n),_&&_.m(s,null)},p(a,[y]){a[1].todo.action.toggle?f?f.p(a,y):(f=We(a),f.c(),f.m(t,l)):f&&(f.d(1),f=null),E===(E=h(a))&&w?w.p(a,y):(w.d(1),w=E(a),w&&(w.c(),w.m(t,null))),a[1].todo.action.edit?i?i.p(a,y):(i=Ge(a),i.c(),i.m(s,n)):i&&(i.d(1),i=null),a[1].todo.action.delete?_?_.p(a,y):(_=Ke(a),_.c(),_.m(s,null)):_&&(_.d(1),_=null),y&8&&u!==(u=`background-color: ${a[3]?"lightgreen":"lightskyblue"}; padding: .25rem .5rem; margin-bottom: .5rem; gap: 1rem;`)&&N(e,"style",u)},i:ee,o:ee,d(a){a&&d(e),f&&f.d(),w.d(),i&&i.d(),_&&_.d()}}}function kt(r,e,t){let{text:l}=e,{access:o}=e,s="view",n=!1;const u=it(),f=()=>u("remove",{text:l}),h=()=>t(3,n=!n);function E(){l=this.value,t(0,l)}const w=()=>t(2,s="view"),i=()=>t(2,s="edit"),_=()=>f();return r.$$set=a=>{"text"in a&&t(0,l=a.text),"access"in a&&t(1,o=a.access)},[l,o,s,n,f,h,E,w,i,_]}class Et extends De{constructor(e){super(),Ce(this,e,kt,yt,He,{text:0,access:1})}}const rt={todo:{view:"Enable user to view todo list page",action:{toggle:"Enable user to toggle todo value",edit:"Enable user to edit todo item",create:"Enable user to add todo item",delete:"Enable user to delete todo item"}},extra:{sayHi:"Enable user to say hi"}};function nt(r,e="",t=".",l=()=>{},o=()=>{}){for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)){const n=e!==""?[e,s].join(t):s,u=r[s];typeof u=="string"?l(u,n,e):(o(u,n,e),nt(u,n,t,l,o))}}function Pe(r,e,t=".",l){const o=(s,n)=>{const u=e!==""?[e,n].join(t):n;if(typeof s=="string"){const f=l(s,u,n);return[n,f]}else return[n,Pe(s,u,t,l)]};return Object.fromEntries(Object.entries(r).map(([s,n])=>o(n,s)))}class wt{constructor(e,t={}){_e(this,"_options");_e(this,"_scopes");_e(this,"_access");this._options={prefix:t.prefix??"",spacer:t.spacer??".",default:t.default??[]},this._access=e,this._scopes=new Map,this.reset()}get _scopeArray(){return Array.from(this._scopes.values())}_createAccessNode(e,t){return{scope:e,desc:t,enabled:this._options.default.includes(e),toggle:()=>{const o=this._scopes.get(e);o!==void 0&&(o.enabled=!o.enabled,this._scopes.set(e,o))}}}_get(e,t={}){return t.exact===!0||t.exact===void 0?this._scopeArray.find(l=>l.scope===e):this._scopeArray.filter(l=>l.scope.startsWith(e))}reset(){nt(this._access,this._options.prefix,this._options.spacer,(e,t)=>{this._scopes.set(t,this._createAccessNode(t,e))})}grant(...e){e.forEach(t=>{const l=this._scopes.get(t);l&&(l.enabled=!0,this._scopes.set(t,l))})}export({enabledOnly:e}={}){let t=this._scopeArray;return e&&(t=t.filter(l=>l.enabled)),t.map(l=>({scope:l.scope,desc:l.desc}))}has(e){return this._get(e,{exact:!0})!==void 0}get(e){return this._get(e,{exact:!0})}search(e,t=l=>l.scope.includes(e)||l.desc.includes(e)){return this._scopeArray.filter(t)}getChild(e){return this._get(e,{exact:!1})}get enabled(){return this._scopeArray.filter(e=>e.enabled===!0)}get disabled(){return this._scopeArray.filter(e=>e.enabled===!1)}get nodes(){const e=structuredClone(this._access);return Pe(e,this._options.prefix,this._options.spacer,(t,l)=>{const o=this._scopes.get(l);return o!==void 0?o:this._createAccessNode(l,t)})}get can(){const e=structuredClone(this._access);return Pe(e,this._options.prefix,this._options.spacer,(t,l)=>{var o;return((o=this._scopes.get(l))==null?void 0:o.enabled)===!0})}}const At=(r,e={})=>new wt(r,e);function Qe(r,e,t){const l=r.slice();return l[12]=e[t],l}function Fe(r){let e,t,l,o;return{c(){e=m("button"),t=S("Say Hi!"),this.h()},l(s){e=b(s,"BUTTON",{class:!0,style:!0});var n=v(e);t=O(n,"Say Hi!"),n.forEach(d),this.h()},h(){N(e,"class","btn -theme"),I(e,"font-size","1rem")},m(s,n){B(s,e,n),c(e,t),l||(o=q(e,"click",r[6]),l=!0)},p:ee,d(s){s&&d(e),l=!1,o()}}}function Xe(r){let e,t;function l(){return r[7](r[12])}return e=new Et({props:{text:r[12],access:r[0]}}),e.$on("remove",l),{c(){et(e.$$.fragment)},l(o){tt(e.$$.fragment,o)},m(o,s){lt(e,o,s),t=!0},p(o,s){r=o;const n={};s&2&&(n.text=r[12]),s&1&&(n.access=r[0]),e.$set(n)},i(o){t||(ne(e.$$.fragment,o),t=!0)},o(o){me(e.$$.fragment,o),t=!1},d(o){ot(e,o)}}}function Tt(r){let e,t;return{c(){e=m("p"),t=S("Sorry, you don't have access to add todo list"),this.h()},l(l){e=b(l,"P",{class:!0,style:!0});var o=v(e);t=O(o,"Sorry, you don't have access to add todo list"),o.forEach(d),this.h()},h(){N(e,"class","text-center mb-0 mt-3"),I(e,"color","lightslategray")},m(l,o){B(l,e,o),c(e,t)},p:ee,d(l){l&&d(e)}}}function Nt(r){let e,t,l,o,s,n,u,f;return{c(){e=m("div"),t=m("input"),l=P(),o=m("button"),s=S("Add Todo"),this.h()},l(h){e=b(h,"DIV",{class:!0,style:!0});var E=v(e);t=b(E,"INPUT",{type:!0,placeholder:!0}),l=D(E),o=b(E,"BUTTON",{class:!0});var w=v(o);s=O(w,"Add Todo"),w.forEach(d),E.forEach(d),this.h()},h(){N(t,"type","text"),N(t,"placeholder","Add to todo list"),N(o,"class","btn -theme w-50"),o.disabled=n=!r[0].todo.action.create,N(e,"class","flex"),I(e,"gap","1rem")},m(h,E){B(h,e,E),c(e,t),pe(t,r[2]),c(e,l),c(e,o),c(o,s),u||(f=[q(t,"input",r[8]),q(o,"click",r[4])],u=!0)},p(h,E){E&4&&t.value!==h[2]&&pe(t,h[2]),E&1&&n!==(n=!h[0].todo.action.create)&&(o.disabled=n)},d(h){h&&d(e),u=!1,st(f)}}}function St(r){let e,t,l,o,s,n,u,f,h,E,w,i=r[0].extra.sayHi&&Fe(r),_=r[1],a=[];for(let k=0;k<_.length;k+=1)a[k]=Xe(Qe(r,_,k));const y=k=>me(a[k],1,1,()=>{a[k]=null});function M(k,T){return k[0].todo.action.create?Nt:Tt}let C=M(r),V=C(r);return{c(){e=m("div"),t=m("h3"),l=m("span"),o=S("Todo App"),s=P(),i&&i.c(),n=P(),u=m("hr"),f=P(),h=m("ul");for(let k=0;k<a.length;k+=1)a[k].c();E=P(),V.c(),this.h()},l(k){e=b(k,"DIV",{class:!0});var T=v(e);t=b(T,"H3",{class:!0});var A=v(t);l=b(A,"SPAN",{});var Q=v(l);o=O(Q,"Todo App"),Q.forEach(d),s=D(A),i&&i.l(A),A.forEach(d),n=D(T),u=b(T,"HR",{}),f=D(T),h=b(T,"UL",{class:!0});var F=v(h);for(let Y=0;Y<a.length;Y+=1)a[Y].l(F);E=D(F),V.l(F),F.forEach(d),T.forEach(d),this.h()},h(){N(t,"class","inline-flex justify-between items-center mb-0"),N(h,"class","list-style -none w-full"),N(e,"class","card card-content mt-4")},m(k,T){B(k,e,T),c(e,t),c(t,l),c(l,o),c(t,s),i&&i.m(t,null),c(e,n),c(e,u),c(e,f),c(e,h);for(let A=0;A<a.length;A+=1)a[A]&&a[A].m(h,null);c(h,E),V.m(h,null),w=!0},p(k,[T]){if(k[0].extra.sayHi?i?i.p(k,T):(i=Fe(k),i.c(),i.m(t,null)):i&&(i.d(1),i=null),T&11){_=k[1];let A;for(A=0;A<_.length;A+=1){const Q=Qe(k,_,A);a[A]?(a[A].p(Q,T),ne(a[A],1)):(a[A]=Xe(Q),a[A].c(),ne(a[A],1),a[A].m(h,E))}for(ut(),A=_.length;A<a.length;A+=1)y(A);dt()}C===(C=M(k))&&V?V.p(k,T):(V.d(1),V=C(k),V&&(V.c(),V.m(h,null)))},i(k){if(!w){for(let T=0;T<_.length;T+=1)ne(a[T]);w=!0}},o(k){a=a.filter(Boolean);for(let T=0;T<a.length;T+=1)me(a[T]);w=!1},d(k){k&&d(e),i&&i.d(),Ie(a,k),V.d()}}}function Ot(r,e,t){let{scopes:l}=e;const o=At(rt);let s=o.can;const n=l.subscribe(y=>{o.reset(),o.grant(...y),t(0,s=o.can)});ft(()=>n());const u=new Set(["Try adding `todo.action.delete` access scope...","Watch the trash button show on scope added...","Then add `todo.action.create` scope to grant create todo to user..."]);let f=[...u],h="";function E(y){u.delete(y),t(1,f=[...u])}function w(){h.length>0&&(u.add(h),t(2,h="")),t(1,f=[...u])}const i=()=>alert("Hi!"),_=y=>E(y);function a(){h=this.value,t(2,h)}return r.$$set=y=>{"scopes"in y&&t(5,l=y.scopes)},[s,f,h,E,w,l,i,_,a]}class It extends De{constructor(e){super(),Ce(this,e,Ot,St,He,{scopes:5})}}function Ye(r,e,t){const l=r.slice();return l[9]=e[t],l}function Ze(r,e,t){const l=r.slice();return l[9]=e[t],l}function Pt(r){let e;return{c(){e=S("All scope has been granted")},l(t){e=O(t,"All scope has been granted")},m(t,l){B(t,e,l)},d(t){t&&d(e)}}}function Dt(r){let e;return{c(){e=S("Pick an access scope")},l(t){e=O(t,"Pick an access scope")},m(t,l){B(t,e,l)},d(t){t&&d(e)}}}function $e(r){let e,t=r[9]+"",l,o;return{c(){e=m("option"),l=S(t),this.h()},l(s){e=b(s,"OPTION",{});var n=v(e);l=O(n,t),n.forEach(d),this.h()},h(){e.__value=o=r[9],e.value=e.__value},m(s,n){B(s,e,n),c(e,l)},p(s,n){n&4&&t!==(t=s[9]+"")&&be(l,t),n&4&&o!==(o=s[9])&&(e.__value=o,e.value=e.__value)},d(s){s&&d(e)}}}function xe(r){let e,t,l=r[9]+"",o,s,n,u,f,h,E;function w(){return r[7](r[9])}return{c(){e=m("li"),t=m("span"),o=S(l),s=P(),n=m("button"),u=S("❌"),f=P(),this.h()},l(i){e=b(i,"LI",{class:!0,style:!0});var _=v(e);t=b(_,"SPAN",{});var a=v(t);o=O(a,l),a.forEach(d),s=D(_),n=b(_,"BUTTON",{style:!0});var y=v(n);u=O(y,"❌"),y.forEach(d),f=D(_),_.forEach(d),this.h()},h(){I(n,"grow","0"),N(e,"class","inline-flex justify-between items-center w-full"),I(e,"background-color","lightskyblue"),I(e,"padding",".25rem .5rem"),I(e,"margin-bottom",".25rem")},m(i,_){B(i,e,_),c(e,t),c(t,o),c(e,s),c(e,n),c(n,u),c(e,f),h||(E=q(n,"click",w),h=!0)},p(i,_){r=i,_&2&&l!==(l=r[9]+"")&&be(o,l)},d(i){i&&d(e),h=!1,E()}}}function Ct(r){let e,t,l,o,s,n,u,f,h,E,w,i,_,a,y,M,C,V,k,T,A,Q=JSON.stringify(rt,null,2)+"",F,Y,J,re,ge,ve,W,R,L,ce,ae,ye,G,ke,ie,Ee,we,Ae,Z,Te,$,te,Ne,Ue;function je(p,H){return p[2].length>0?Dt:Pt}let ue=je(r),K=ue(r),le=r[2],U=[];for(let p=0;p<le.length;p+=1)U[p]=$e(Ze(r,le,p));let oe=r[1],j=[];for(let p=0;p<oe.length;p+=1)j[p]=xe(Ye(r,oe,p));return $=new It({props:{scopes:r[3]}}),{c(){e=m("main"),t=m("h1"),l=S("Access Control Tree Demo"),o=P(),s=m("hr"),n=P(),u=m("div"),f=m("div"),h=m("p"),E=S("JSON data bellow is an access control tree configured for todo app bellow. Based on the object tree, "),w=m("code"),i=S("access-control-tree"),_=S(" will generate 6 access scope that you can saved on databases and grant to user for determining access to authenticated user."),a=P(),y=m("p"),M=S("visit our "),C=m("a"),V=S("github repo"),k=S(" for documentation on how to get started."),T=P(),A=m("pre"),F=S(Q),Y=P(),J=m("div"),re=m("p"),ge=S("Try granting access scope bellow to see the action..."),ve=P(),W=m("div"),R=m("select"),L=m("option"),K.c(),ce=P();for(let p=0;p<U.length;p+=1)U[p].c();ye=P(),G=m("button"),ke=S("Add Scope"),Ee=P(),we=m("hr"),Ae=P(),Z=m("ul");for(let p=0;p<j.length;p+=1)j[p].c();Te=P(),et($.$$.fragment),this.h()},l(p){e=b(p,"MAIN",{class:!0});var H=v(e);t=b(H,"H1",{});var g=v(t);l=O(g,"Access Control Tree Demo"),g.forEach(d),o=D(H),s=b(H,"HR",{}),n=D(H),u=b(H,"DIV",{class:!0,style:!0});var z=v(u);f=b(z,"DIV",{class:!0,style:!0});var se=v(f);h=b(se,"P",{});var de=v(h);E=O(de,"JSON data bellow is an access control tree configured for todo app bellow. Based on the object tree, "),w=b(de,"CODE",{});var Be=v(w);i=O(Be,"access-control-tree"),Be.forEach(d),_=O(de," will generate 6 access scope that you can saved on databases and grant to user for determining access to authenticated user."),de.forEach(d),a=D(se),y=b(se,"P",{});var fe=v(y);M=O(fe,"visit our "),C=b(fe,"A",{href:!0,style:!0});var Ve=v(C);V=O(Ve,"github repo"),Ve.forEach(d),k=O(fe," for documentation on how to get started."),fe.forEach(d),T=D(se),A=b(se,"PRE",{});var Re=v(A);F=O(Re,Q),Re.forEach(d),se.forEach(d),Y=D(z),J=b(z,"DIV",{class:!0});var X=v(J);re=b(X,"P",{});var Je=v(re);ge=O(Je,"Try granting access scope bellow to see the action..."),Je.forEach(d),ve=D(X),W=b(X,"DIV",{class:!0,style:!0});var he=v(W);R=b(he,"SELECT",{});var Se=v(R);L=b(Se,"OPTION",{});var Oe=v(L);K.l(Oe),ce=D(Oe),Oe.forEach(d);for(let x=0;x<U.length;x+=1)U[x].l(Se);Se.forEach(d),ye=D(he),G=b(he,"BUTTON",{class:!0});var Le=v(G);ke=O(Le,"Add Scope"),Le.forEach(d),he.forEach(d),Ee=D(X),we=b(X,"HR",{}),Ae=D(X),Z=b(X,"UL",{class:!0});var Me=v(Z);for(let x=0;x<j.length;x+=1)j[x].l(Me);Me.forEach(d),X.forEach(d),z.forEach(d),Te=D(H),tt($.$$.fragment,H),H.forEach(d),this.h()},h(){N(C,"href","https://github.com/ariomoklo/access-control-tree"),I(C,"background-color","black"),I(C,"color","white"),I(C,"padding","4px 6px"),I(C,"border-radius","6px"),N(f,"class","card card-content"),I(f,"max-width","75ch"),L.disabled=!0,L.selected=!0,L.__value="",L.value=L.__value,R.disabled=ae=r[2].length===0,r[0]===void 0&&ht(()=>r[6].call(R)),N(G,"class","btn -theme w-50"),G.disabled=ie=r[2].length===0,N(W,"class","flex"),I(W,"gap","1rem"),N(Z,"class","list-style -none w-full"),N(J,"class","card card-content w-50"),N(u,"class","flex"),I(u,"gap","1rem"),N(e,"class","container p-4")},m(p,H){B(p,e,H),c(e,t),c(t,l),c(e,o),c(e,s),c(e,n),c(e,u),c(u,f),c(f,h),c(h,E),c(h,w),c(w,i),c(h,_),c(f,a),c(f,y),c(y,M),c(y,C),c(C,V),c(y,k),c(f,T),c(f,A),c(A,F),c(u,Y),c(u,J),c(J,re),c(re,ge),c(J,ve),c(J,W),c(W,R),c(R,L),K.m(L,null),c(L,ce);for(let g=0;g<U.length;g+=1)U[g]&&U[g].m(R,null);ze(R,r[0],!0),c(W,ye),c(W,G),c(G,ke),c(J,Ee),c(J,we),c(J,Ae),c(J,Z);for(let g=0;g<j.length;g+=1)j[g]&&j[g].m(Z,null);c(e,Te),lt($,e,null),te=!0,Ne||(Ue=[q(R,"change",r[6]),q(G,"click",r[4])],Ne=!0)},p(p,[H]){if(ue!==(ue=je(p))&&(K.d(1),K=ue(p),K&&(K.c(),K.m(L,ce))),H&4){le=p[2];let g;for(g=0;g<le.length;g+=1){const z=Ze(p,le,g);U[g]?U[g].p(z,H):(U[g]=$e(z),U[g].c(),U[g].m(R,null))}for(;g<U.length;g+=1)U[g].d(1);U.length=le.length}if((!te||H&4&&ae!==(ae=p[2].length===0))&&(R.disabled=ae),H&5&&ze(R,p[0]),(!te||H&4&&ie!==(ie=p[2].length===0))&&(G.disabled=ie),H&34){oe=p[1];let g;for(g=0;g<oe.length;g+=1){const z=Ye(p,oe,g);j[g]?j[g].p(z,H):(j[g]=xe(z),j[g].c(),j[g].m(Z,null))}for(;g<j.length;g+=1)j[g].d(1);j.length=oe.length}},i(p){te||(ne($.$$.fragment,p),te=!0)},o(p){me($.$$.fragment,p),te=!1},d(p){p&&d(e),K.d(),Ie(U,p),Ie(j,p),ot($),Ne=!1,st(Ue)}}}function Ht(r,e,t){const l=pt(["todo.view"]);let o,s;l.subscribe(i=>t(1,s=i));let n=new Set(["todo.action.toggle","todo.action.edit","todo.action.create","todo.action.delete","extra.sayHi"]),u=[...n];function f(){n.has(o)&&(l.update(i=>[...i,o]),n.delete(o),t(2,u=[...n]),t(0,o=""))}function h(i){l.update(_=>_.filter(a=>a!==i)),n.add(i),t(2,u=[...n])}function E(){o=_t(this),t(0,o),t(2,u)}return[o,s,u,l,f,h,E,i=>h(i)]}class Vt extends De{constructor(e){super(),Ce(this,e,Ht,Ct,He,{})}}export{Vt as default};
